import e from"primevue/ripple";import{DomHandler as t,UniqueComponentId as n}from"primevue/utils";import{resolveDirective as a,openBlock as i,createElementBlock as s,normalizeClass as r,createElementVNode as o,withDirectives as l,mergeProps as d,createCommentVNode as c,Fragment as b,renderList as p,toDisplayString as h,createBlock as v,resolveDynamicComponent as u,vShow as f}from"vue";var x={name:"TabView",emits:["update:activeIndex","tab-change","tab-click"],props:{activeIndex:{type:Number,default:0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},previousButtonProps:null,nextButtonProps:null},data(){return{d_activeIndex:this.activeIndex,isPrevButtonDisabled:!0,isNextButtonDisabled:!1}},watch:{activeIndex(e){this.d_activeIndex=e,this.scrollInView({index:e})}},mounted(){this.updateInkBar(),this.scrollable&&this.updateButtonState()},updated(){this.updateInkBar()},methods:{isTabPanel:e=>"TabPanel"===e.type.name,isTabActive(e){return this.d_activeIndex===e},getTabProp:(e,t)=>e.props?e.props[t]:void 0,getKey(e,t){return this.getTabProp(e,"header")||t},getTabHeaderActionId(e){return`${this.id}_${e}_header_action`},getTabContentId(e){return`${this.id}_${e}_content`},onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick(){const e=this.$refs.content,n=t.getWidth(e)-this.getVisibleButtonWidths(),a=e.scrollLeft-n;e.scrollLeft=a<=0?0:a},onNextButtonClick(){const e=this.$refs.content,n=t.getWidth(e)-this.getVisibleButtonWidths(),a=e.scrollLeft+n,i=e.scrollWidth-n;e.scrollLeft=a>=i?i:a},onTabClick(e,t,n){this.changeActiveIndex(e,t,n),this.$emit("tab-click",{originalEvent:e,index:n})},onTabKeyDown(e,t,n){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":this.onTabEnterKey(e,t,n)}},onTabArrowRightKey(e){const t=this.findNextHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabHomeKey(e),e.preventDefault()},onTabArrowLeftKey(e){const t=this.findPrevHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey(e){const t=this.findFirstHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onTabEndKey(e){const t=this.findLastHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onPageDownKey(e){this.scrollInView({index:this.$refs.nav.children.length-2}),e.preventDefault()},onPageUpKey(e){this.scrollInView({index:0}),e.preventDefault()},onTabEnterKey(e,t,n){this.changeActiveIndex(e,t,n),e.preventDefault()},findNextHeaderAction(e,n=!1){const a=n?e:e.nextElementSibling;return a?t.hasClass(a,"p-disabled")||t.hasClass(a,"p-tabview-ink-bar")?this.findNextHeaderAction(a):t.findSingle(a,".p-tabview-header-action"):null},findPrevHeaderAction(e,n=!1){const a=n?e:e.previousElementSibling;return a?t.hasClass(a,"p-disabled")||t.hasClass(a,"p-tabview-ink-bar")?this.findPrevHeaderAction(a):t.findSingle(a,".p-tabview-header-action"):null},findFirstHeaderAction(){return this.findNextHeaderAction(this.$refs.nav.firstElementChild,!0)},findLastHeaderAction(){return this.findPrevHeaderAction(this.$refs.nav.lastElementChild,!0)},changeActiveIndex(e,t,n){this.getTabProp(t,"disabled")||this.d_activeIndex===n||(this.d_activeIndex=n,this.$emit("update:activeIndex",n),this.$emit("tab-change",{originalEvent:e,index:n}),this.scrollInView({index:n}))},changeFocusedTab(e,n){if(n&&(t.focus(n),this.scrollInView({element:n}),this.selectOnFocus)){const t=parseInt(n.parentElement.dataset.index,10),a=this.tabs[t];this.changeActiveIndex(e,a,t)}},scrollInView({element:e,index:t=-1}){const n=e||this.$refs.nav.children[t];n&&n.scrollIntoView&&n.scrollIntoView({block:"nearest"})},updateInkBar(){let e=this.$refs.nav.children[this.d_activeIndex];this.$refs.inkbar.style.width=t.getWidth(e)+"px",this.$refs.inkbar.style.left=t.getOffset(e).left-t.getOffset(this.$refs.nav).left+"px"},updateButtonState(){const e=this.$refs.content,{scrollLeft:n,scrollWidth:a}=e,i=t.getWidth(e);this.isPrevButtonDisabled=0===n,this.isNextButtonDisabled=parseInt(n)===a-i},getVisibleButtonWidths(){const{prevBtn:e,nextBtn:n}=this.$refs;return[e,n].reduce(((e,n)=>n?e+t.getWidth(n):e),0)},getTabHeaderClass(e,t){return["p-tabview-header",this.getTabProp(e,"headerClass"),{"p-highlight":this.d_activeIndex===t,"p-disabled":this.getTabProp(e,"disabled")}]},getTabContentClass(e){return["p-tabview-panel",this.getTabProp(e,"contentClass")]}},computed:{contentClasses(){return["p-tabview p-component",{"p-tabview-scrollable":this.scrollable}]},tabs(){return this.$slots.default().reduce(((e,t)=>(this.isTabPanel(t)?e.push(t):t.children&&t.children instanceof Array&&t.children.forEach((t=>{this.isTabPanel(t)&&e.push(t)})),e)),[])},prevButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},id(){return this.$attrs.id||n()}},directives:{ripple:e}};const g={class:"p-tabview-nav-container"},w=["tabindex","aria-label"],y=[o("span",{class:"pi pi-chevron-left","aria-hidden":"true"},null,-1)],m={ref:"nav",class:"p-tabview-nav",role:"tablist"},T=["data-index"],k=["id","tabindex","aria-disabled","aria-selected","aria-controls","onClick","onKeydown"],P={key:0,class:"p-tabview-title"},B={ref:"inkbar",class:"p-tabview-ink-bar",role:"presentation","aria-hidden":"true"},A=["tabindex","aria-label"],C=[o("span",{class:"pi pi-chevron-right","aria-hidden":"true"},null,-1)],I={class:"p-tabview-panels"},$=["aria-labelledby"];!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("\n.p-tabview-nav-container {\n    position: relative;\n}\n.p-tabview-scrollable .p-tabview-nav-container {\n    overflow: hidden;\n}\n.p-tabview-nav-content {\n    overflow-x: auto;\n    overflow-y: hidden;\n    scroll-behavior: smooth;\n    scrollbar-width: none;\n    -ms-scroll-chaining: contain auto;\n        overscroll-behavior: contain auto;\n}\n.p-tabview-nav {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n}\n.p-tabview-header-action {\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    position: relative;\n    text-decoration: none;\n    overflow: hidden;\n}\n.p-tabview-ink-bar {\n    display: none;\n    z-index: 1;\n}\n.p-tabview-header-action:focus {\n    z-index: 1;\n}\n.p-tabview-title {\n    line-height: 1;\n    white-space: nowrap;\n}\n.p-tabview-nav-btn {\n    position: absolute;\n    top: 0;\n    z-index: 2;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-tabview-nav-prev {\n    left: 0;\n}\n.p-tabview-nav-next {\n    right: 0;\n}\n.p-tabview-nav-content::-webkit-scrollbar {\n    display: none;\n}\n"),x.render=function(e,t,n,x,K,H){const D=a("ripple");return i(),s("div",{class:r(H.contentClasses)},[o("div",g,[n.scrollable&&!K.isPrevButtonDisabled?l((i(),s("button",d({key:0,ref:"prevBtn",type:"button",class:"p-tabview-nav-prev p-tabview-nav-btn p-link",tabindex:n.tabindex,"aria-label":H.prevButtonAriaLabel,onClick:t[0]||(t[0]=(...e)=>H.onPrevButtonClick&&H.onPrevButtonClick(...e))},n.previousButtonProps),y,16,w)),[[D]]):c("",!0),o("div",{ref:"content",class:"p-tabview-nav-content",onScroll:t[1]||(t[1]=(...e)=>H.onScroll&&H.onScroll(...e))},[o("ul",m,[(i(!0),s(b,null,p(H.tabs,((e,t)=>(i(),s("li",d({key:H.getKey(e,t),style:H.getTabProp(e,"headerStyle"),class:H.getTabHeaderClass(e,t),role:"presentation","data-index":t},H.getTabProp(e,"headerProps")),[l((i(),s("a",d({id:H.getTabHeaderActionId(t),class:"p-tabview-nav-link p-tabview-header-action",tabindex:H.getTabProp(e,"disabled")||!H.isTabActive(t)?-1:n.tabindex,role:"tab","aria-disabled":H.getTabProp(e,"disabled"),"aria-selected":H.isTabActive(t),"aria-controls":H.getTabContentId(t),onClick:n=>H.onTabClick(n,e,t),onKeydown:n=>H.onTabKeyDown(n,e,t)},H.getTabProp(e,"headerActionProps")),[e.props&&e.props.header?(i(),s("span",P,h(e.props.header),1)):c("",!0),e.children&&e.children.header?(i(),v(u(e.children.header),{key:1})):c("",!0)],16,k)),[[D]])],16,T)))),128)),o("li",B,null,512)],512)],544),n.scrollable&&!K.isNextButtonDisabled?l((i(),s("button",d({key:1,ref:"nextBtn",type:"button",class:"p-tabview-nav-next p-tabview-nav-btn p-link",tabindex:n.tabindex,"aria-label":H.nextButtonAriaLabel,onClick:t[2]||(t[2]=(...e)=>H.onNextButtonClick&&H.onNextButtonClick(...e))},n.nextButtonProps),C,16,A)),[[D]]):c("",!0)]),o("div",I,[(i(!0),s(b,null,p(H.tabs,((e,t)=>(i(),s(b,{key:H.getKey(e,t)},[!n.lazy||H.isTabActive(t)?l((i(),s("div",d({key:0,style:H.getTabProp(e,"contentStyle"),class:H.getTabContentClass(e),role:"tabpanel","aria-labelledby":H.getTabHeaderActionId(t)},H.getTabProp(e,"contentProps")),[(i(),v(u(e)))],16,$)),[[f,!!n.lazy||H.isTabActive(t)]]):c("",!0)],64)))),128))])],2)};export{x as default};
